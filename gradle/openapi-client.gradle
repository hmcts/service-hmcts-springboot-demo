tasks.named('compileJava') {
  dependsOn(tasks.openApiGenerate)
}

openApiGenerate {
  inputSpec.set("src/main/resources/openapi/openapi-spec.yml")
  outputDir = "${layout.buildDirectory.get().asFile.absolutePath}/generated"
  apiPackage = "uk.gov.hmcts.cp.openapi.api"
  modelPackage = "uk.gov.hmcts.cp.openapi.model"
  typeMappings = ["OffsetDateTime": "Instant"]
  importMappings = ["java.time.OffsetDateTime": "java.time.Instant"]
  configOptions = [
    library: "restclient",
  ]
}
